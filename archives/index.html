<!DOCTYPE html>
<html>
            <head>
        <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1,initial-scale=1,user-scalable=no" />
        <meta charset="utf-8">
        <title>John&#39;s Blog</title>
        <link rel="stylesheet" href="https://caijh.github.io//styles/main.css">
        <link rel="stylesheet" href="https://at.alicdn.com/t/font_1306644_jwtuc2zzbrd.css">
        <link href="https://cdn.bootcss.com/animate.css/3.7.2/animate.min.css" rel="stylesheet">
         <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
        <script src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js"></script>
         <script src="https://cdn.bootcss.com/highlight.js/9.15.10/highlight.min.js"></script>
         <script >hljs.initHighlightingOnLoad();</script>

    </head>
    <body>
              <header class="header mdui-m-b-5">      
            <div class="container  ">
                <div class="index-title animated fadeInDown mdui-text-center mdui-text-color-white mdui-m-b-2" style="animation-delay: 0.2s"><a href="https://caijh.github.io/">John&#39;s Blog</a></div>
                <div class="mdui-text-color-white animated fadeInDown mdui-text-center  mdui-m-b-3" style="animation-delay: 0.4s">搬砖小弟</div>
           
            <nav id="nav" class="mdui-text-center animated fadeInDown" style="animation-delay: 0.6s">
                   
                            <li><a href="/">首页</a>
                                <span class="nav-style top"></span>
                                <span class="nav-style bottom"></span>
                                <span class="nav-style left"></span>
                                <span class="nav-style right"></span>
                                </li>
                    
                            <li><a href="/archives">归档</a>
                                <span class="nav-style top"></span>
                                <span class="nav-style bottom"></span>
                                <span class="nav-style left"></span>
                                <span class="nav-style right"></span>
                                </li>
                    
                            <li><a href="/tags">标签</a>
                                <span class="nav-style top"></span>
                                <span class="nav-style bottom"></span>
                                <span class="nav-style left"></span>
                                <span class="nav-style right"></span>
                                </li>
                    
                            <li><a href="/post/about">关于</a>
                                <span class="nav-style top"></span>
                                <span class="nav-style bottom"></span>
                                <span class="nav-style left"></span>
                                <span class="nav-style right"></span>
                                </li>
                    
                  </nav>
                </div>
        </header>
        <div class="mdui-container ">
                <div class="mdui-row">
                        <div class="mdui-col-md-10 mdui-col-offset-md-1 mdui-m-t-1">
                            <div class="mdui-row-md-2 mdui-row-xs-1">
                                
                                

                    
                              
                               
                                <article class="animated fadeIn" style="animation-delay:1s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2020-01-01</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/kubernetes-tong-guo-kubeadm-bu-shu-kubernetes-ji-qun">Kubernetes - 通过kubeadm部署Kubernetes集群</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"></div>
                                          </div>
                                </article>
                                
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                               
                                
                                

                    
                              
                               
                                
                               
                                <article class="animated fadeIn" style="animation-delay:1.3s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-12-28</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/kubernetes-jie-jue-shan-chu-namespace-yi-zhi-terminating-de-wen-ti">Kubernetes - 解决删除namespace一直Terminating的问题</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"></div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:1.6s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-11-04</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/spring-cloud-eureka">Spring Cloud - Eureka</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><blockquote>
<p>是由Netflix开源的基于REST的服务治理组件，包含了eureka server 和eureka client。从2012年9月在GitHub上发布1.1.2版本以来，至今已经发布了231次，最新版本为2018年8月份发布的1.9.4版本。期间有进行2.x版本的开发，不过由于各种原因内部已经冻结开发，目前还是以1.x版本为主。Spring Cloud Netflix Eureka是Pivotal公司为了将Netflix Eureka整合于Spring Cloud生态系统提供的版本。</p>
</blockquote>
<h1 id="eureka快速入门">Eureka快速入门</h1>
<p><strong>Eureka Server</strong></p>
<ol>
<li>
<p>引入依赖</p>
<pre><code>        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt;
        &lt;/dependency&gt;
</code></pre>
</li>
<li>
<p>主应用类上添加**@EnableEurekaServer**</p>
</li>
<li>
<p>配置eureka</p>
<pre><code>eureka:
  client:
    register-with-eureka: true
    fetch-registry: true
    service-url:
      defaultZone: ${EUREKA_SERVER_ADDRESS:http://localhost:8761/eureka/}
  server:
    peer-node-read-timeout-ms: 5000
</code></pre>
</li>
<li>
<p>启动</p>
<p>![image-20191024165113212](Spring Cloud - 服务注册中心eureka/image-20191024165113212.png)</p>
</li>
</ol>
<p><strong>Eureka Client</strong></p>
<ol>
<li>
<p>引入客户端依赖</p>
<pre><code>        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;
        &lt;/dependency&gt;
</code></pre>
</li>
<li>
<p>主应用类添加**@EnableDiscoveryClient**</p>
</li>
<li>
<p>配置</p>
<pre><code>eureka:
  instance:
    prefer-ip-address: true
  client:
    service-url:
      defaultZone: ${EUREKA_SERVER_ADDRESS:http://localhost:8761/eureka/}
</code></pre>
</li>
<li>
<p>启动客户端</p>
</li>
</ol>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:1.9s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-08-30</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/kubernetes-bu-shu-rabbitmq-ji-qun">kubernetes - 部署rabbitmq集群</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><hr>
<p>author: caijunhui<br>
date: 2019-08-29</p>
<hr>
<p>本文介绍如何在k8s环境下部署rabbitmq</p>
<p>镜像使用rabbitmq:3.7-management-alpine，从3.7.0开始rabbitmq使用了peer discovery， 不使用autoscale。</p>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:2.2s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-08-28</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/linux-an-zhuang-nfs">Linux - 安装nfs</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><p>想要k8s中使用nfs来动态提供PersistentVolume，so查下怎么搭建nfs server.<br>
环境：<br>
centos 7</p>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:2.5s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-08-09</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/k8s-an-zhuang-kube-dns-cha-jian">k8s - 安装kube-dns插件</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"></div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:2.8s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-08-06</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/maven-zen-me-yang-skip-test">Maven - 怎么样skip test</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><h3 id="maven-参数设置">Maven 参数设置</h3>
<ul>
<li>使用参数-Dmaven.test.skip=true</li>
<li>在pom.xml中定义参数<br>
<code>&lt;properties&gt; &lt;maven.test.skip&gt;true&lt;/maven.test.skip&gt; &lt;/properties&gt;</code></li>
</ul>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:3.1s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-08-06</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/k8s-ji-ben-gai-nian">k8s - 基本概念</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><h2 id="pod">Pod</h2>
<p>Pod是一个或多个若干相关容器的组合，Pod包含的容器运行在同一台宿主机上，这些容器使用相同的网络命名空间、IP地址和端口，相互之间能通过localhost来发现和通信。另外，这些容器还可共享一块存储卷空间。在Kubernetes中创建、调度和管理的最小单位是Pod，而不是容器，Pod通过提供更高层次的抽象，提供了更加灵活的部署和管理模式。</p>
<p>Pod是Kubernetes的基本操作单元，也是应用运行的载体。</p>
<p>Pod是容器的集合，容器是真正的执行体。相比原生的容器接口，Pod提供了更高层次的抽象，但是Pod的设计并不是为了运行同一个应用的多个实例，而是运行一个应用多个紧密联系的程序。而每个程序运行在单独的容器中，以Pod的形式组合成一个应用。</p>
<h2 id="replication-controller">Replication Controller</h2>
<p>Replication Controller用来控制管理Pod副本（Replica，或者称为实例），Replication Controller确保任何时候Kubernetes集群中有指定数量的Pod副本在运行。如果少于指定数量的Pod副本，Replication Controller会启动新的Pod副本，反之会杀死多余的副本以保证数量不变。另外，Replication Controller是弹性伸缩、滚动升级的实现核心。</p>
<p>注：官方建议使用Deployment代替</p>
<h2 id="service">Service</h2>
<p>Service是真实应用服务的抽象，定义了Pod的逻辑集合和访问这个Pod集合的策略。Service将代理Pod对外表现为一个单一访问接口，外部不需要了解后端Pod如何运行，这给扩展和维护带来很多好处，提供了一套简化的服务代理和发现机制。</p>
<h2 id="label">Label</h2>
<p>Label是用于区分Pod、Service、Replication Controller的Key/Value对，实际上，Kubernetes中的任意API对象都可以通过Label进行标识。每个API对象可以有多个Label，但是每个Label的Key只能对应一个Value。Label是Service和Replication Controller运行的基础，它们都通过Label来关联Pod.</p>
<h2 id="master">Master</h2>
<p>Kubernetes里的Master指的是集群控制节点，每个Kubernetes集群里需要有一个Master节点来负责整个集群的管理和控制，基本上Kubernetes所有的控制命令都是发给它，它来负责具体的执行过程.</p>
<p>在Master运行的组件有：</p>
<ul>
<li>kube-apiserver, 提供了HTTP Rest接口的关键服务进程，是Kubernetes里所有资源的增、删、改、查等操作的唯一入口，也是集群控制的入口进程.</li>
<li>etcd, 强一致性高可用的key-value存储系统，kubernetes用来存储集群的数据。</li>
<li>Kube-scheduler，负责资源调度（Pod调度）的进程，为新建的Pod分配Node。</li>
<li>Kube-controller-manager，Kubernetes里所有资源对象的自动化控制中心，负责执行各种控制器。</li>
</ul>
<h2 id="node">Node</h2>
<p>Kubernetes属于主从分布式集群架构，Kubernetes Node（简称为Node，早期版本叫作Minion）运行并管理容器。Node作为Kubernetes的操作单元，用来分配给Pod（或者说容器）进行绑定，Pod最终运行在Node上，Node可以认为是Pod的宿主机。</p>
<p>Node节点上运行的组件有：</p>
<ul>
<li>kubelet, 负责Pod对应的容器的创建、启停等任务，同时与Master节点密切协作，实现集群管理的基本功能。</li>
<li>Kube-proxy, 实现Kubernetes Service的通信与负载均衡机制的重要组件。</li>
<li>container runtime, 负责运行容器。</li>
</ul>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:3.4s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-07-20</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/springboot-qi-dong-yuan-li">SpringBoot - 启动原理</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><p>SpringBoot应用启动类一般如下：</p>
<pre><code>@SpringBootApplication
public class SampleRabbitmqApplication {

    public static void main(String[] args) {
        SpringApplication.run(SampleRabbitmqApplication.class, args);
    }

}
</code></pre>
<h1 id="springbootapplication">@SpringBootApplication</h1>
<p>@SpringBootApplication这个组合注解包含了三个注解 ：</p>
<ul>
<li>@SpringBootConfiguration</li>
<li>@EnableAutoConfiguration</li>
<li>@ComponentScan</li>
</ul>
<p>@SpringBootConfiguration实际上应用@Configuration， 任何注解了Configuration了java类都是一个JavaConfig配置类。<br>
@ComponentScan的功能是自动扫描并加载符合条件的组件（如@Component和@Repository）,最终将这些bean加载IoC容器中。<br>
@EnableAutoConfiguration借助@Import收集和注册特定场景相关的bean定义。</p>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:3.6999999999999997s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-07-18</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/redis-bian-yi-chun-jing-ban">Redis - 编译纯净版</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><p>按redis官网编译的redis, 可执行文件会与源码在一起, 如果想编译纯净版可按下边的步骤。</p>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:4s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-07-18</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/redis-ru-he-fang-wen-da-liang-shu-ju">Redis - 如何访问大量数据</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><p>众如周知，Redis中<code>keys pattern</code>命令可以返回大量数据。<br>
非生产环境可以结合linux的管道删除相同pattern的key.</p>
<pre><code>redis-cli keys &quot;*&quot; | xargs redis-cli del
</code></pre>
<p>但是生产环境一般keys会被重命名禁止在生产使用。<br>
这时可以使用scan命令删除。</p>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:4.3s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-07-18</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/redis-huan-cun-wen-ti">Redis - 缓存问题</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><h3 id="缓存穿透">缓存穿透</h3>
<blockquote>
<p>什么是缓存穿透？<br>
缓存穿透是指查询一个一定不在缓存中存在的key. 由于key不存在，每次都会去查询数据库，如果对于这个key的请求很多的话，可能会把数据库搞垮。</p>
</blockquote>
<p>解决方案：</p>
<ol>
<li>布隆过滤器</li>
<li>将查询数据库的空结果也缓存起来，设置一个较短的过期时间。</li>
</ol>
<h3 id="缓存雪崩">缓存雪崩</h3>
<blockquote>
<p>什么是缓存雪崩？<br>
对于多个key的查询，全部请求都走数据库了。有两种情况：一种是redis挂掉，别一个情况是一段时间内那些key都失效了。<br>
对于第一种情况要保证redis的的高可性，对于第二种情况可以为key设置不同的随随机过期时间。</p>
</blockquote>
<h3 id="缓存数据一致性">缓存数据一致性</h3>
<ol>
<li>写数据库也写缓存，保证了数据一致性；但是难保证数据库与redis的事务</li>
<li>写数据库，直接删缓存；读缓存发现没有，从数据库读取并保存缓存；带来问题是并发问题。</li>
<li>应该根据不同的业务，来处理缓存的生成。</li>
</ol>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:4.6s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-07-18</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/redis-shu-ju-tao-tai-ce-lue">Redis - 数据淘汰策略</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><ul>
<li>volatile-lru：从已设置过期时间的数据集（server.db[i].expires）中挑选最近最少使用的数据淘汰</li>
<li>volatile-ttl：从已设置过期时间的数据集（server.db[i].expires）中挑选将要过期的数据淘汰</li>
<li>volatile-random：从已设置过期时间的数据集（server.db[i].expires）中任意选择数据淘汰</li>
<li>allkeys-lru：从数据集（server.db[i].dict）中挑选最近最少使用的数据淘汰</li>
<li>allkeys-random：从数据集（server.db[i].dict）中任意选择数据淘汰</li>
<li>no-enviction（驱逐）：禁止驱逐数据，返回错误</li>
</ul>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:4.9s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-07-17</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/vagrant-shi-yong">Vagrant - 使用</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><p>Vagrant是用来管理虚拟机的，如VirtualBox、VMware、AWS等，主要好处是可以提供一个可配置、可移植和复用的软件环境，可以使用shell、chef、puppet等工具部署。所以vagrant不能单独使用，如果你用它来管理自己的开发环境的话，必须在自己的电脑里安装了虚拟机软件，我使用的是virtualbox。</p>
<p>Vagrant提供一个命令行工具vagrant，通过这个命令行工具可以直接启动一个虚拟机，当然你需要提前定义一个Vagrantfile文件，这有点类似Dockerfile之于docker了。</p>
<p>跟docker类比这来看vagrant就比较好理解了，vagrant也是用来提供一致性环境的，vagrant本身也提供一个镜像源，使用vagrant init hashicorp/precise64就可以初始化一个Ubuntu 12.04的镜像。</p>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:5.2s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-07-15</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/redis-guo-qi-shan-chu-ce-lue">Redis - 过期删除策略</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><p>Redis 采用的过期策略： 懒汉式删除 + 定期删除</p>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:5.5s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-07-14</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/mysql-explain-xiang-jie">MySQL - explain详解</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"></div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:5.8s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-07-14</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/yuan-dai-ma-abstractqueuedsynchronizer">源码阅读 - AbstractQueuedSynchronizer</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><blockquote>
<p>AbstractQueuedSynchronizer, 简称AQS, 是Java 并发包的基础类，并发包中的很多api都是基于AQS来实现加锁与释放锁等功能。</p>
</blockquote>
<p>例如ReentrantLock内部拥有一个继承于AbstractQueuedSynchronizer的Sync类实现加锁与释放锁。<br>
AQS内部有一个state状态记录当前线程的加锁次数，还有一个exclusiveOwnerThread变量记录了独占的线程。</p>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:6.1s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-07-13</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/spring-cloud-ru-he-jie-jue-feignribbon-di-yi-ci-qing-qiu-shi-bai-de-wen-ti">Spring Cloud - 如何解决Feign/Ribbon第一次请求失败的问题</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><blockquote>
<p>造成该问题的原因？<br>
Hystrix默认的超时时间是1秒，如果超过这个时间尚未响应，将会进入fallback代码。而首次请求往往会比较慢（由于Ribbon是懒加载的，在首次请求时，才会开始初始化相关类），这个响应时间可能就大于1秒了。</p>
</blockquote>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:6.3999999999999995s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-07-08</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/java-xian-cheng-chi">Java - 线程池</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><h4 id="threadpoolexecutor的重要参数">ThreadPoolExecutor的重要参数</h4>
<ul>
<li>corePoolSize：核心线程数<br>
核心线程会一直存活，及时没有任务需要执行<br>
当线程数小于核心线程数时，即使有线程空闲，线程池也会优先创建新线程处理<br>
设置allowCoreThreadTimeout=true（默认false）时，核心线程会超时关闭</li>
<li>queueCapacity：任务队列容量（阻塞队列）<br>
当核心线程数达到最大时，新任务会放在队列中排队等待执行</li>
<li>maxPoolSize：最大线程数<br>
当线程数&gt;=corePoolSize，且任务队列已满时。线程池会创建新线程来处理任务<br>
当线程数=maxPoolSize，且任务队列已满时，线程池会拒绝处理任务而抛出异常</li>
<li>keepAliveTime：线程空闲时间<br>
当线程空闲时间达到keepAliveTime时，线程会退出，直到线程数量=corePoolSize<br>
如果allowCoreThreadTimeout=true，则会直到线程数量=0</li>
<li>allowCoreThreadTimeout：允许核心线程超时</li>
<li>rejectedExecutionHandler：任务拒绝处理器<br>
两种情况会拒绝处理任务：<br>
当线程数已经达到maxPoolSize，切队列已满，会拒绝新任务<br>
当线程池被调用shutdown()后，会等待线程池里的任务执行完毕，再shutdown。如果在调用shutdown()和线程池真正shutdown之间提交任务，会拒绝新任务<br>
线程池会调用rejectedExecutionHandler来处理这个任务。如果没有设置默认是AbortPolicy，会抛出异常<br>
ThreadPoolExecutor类有几个内部实现类来处理这类情况：<br>
AbortPolicy 丢弃任务，抛运行时异常<br>
CallerRunsPolicy 执行任务<br>
DiscardPolicy 忽视，什么都不会发生<br>
DiscardOldestPolicy 从队列中踢出最先进入队列（最后一个执行）的任务<br>
实现RejectedExecutionHandler接口，可自定义处理器</li>
</ul>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:6.7s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-07-06</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/kafka-acks-can-shu">Kafka-Acks参数</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><p>kafka中用topic表示同类的消息，topic可以有1个或多个partition.<br>
kafka集群中一个broker负责一部分partition，在kafka集群中，每个Partition都有多个副本，其中一个副本叫做leader，其他的副本叫做follower。</p>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:7s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-07-06</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/yuan-ma-yue-du-tomcat">源码阅读-tomcat</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><h1 id="tomcat启动过程">tomcat启动过程</h1>
<figure data-type="image" tabindex="1"><img src="https://caijh.github.io//post-images/1562423239997.jpg" alt="" loading="lazy"></figure>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:7.3s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-07-03</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/yuan-ma-yue-du-hashmap-concurrenthashmap">源码阅读-HashMap ConcurrentHashMap</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><p>搬砖自 https://mp.weixin.qq.com/s/DTzd3jdtnnveffL-zcpmyg</p>
<p>前言<br>
Map 这样的 Key Value 在软件开发中是非常经典的结构，常用于在内存中存放数据。</p>
<p>本篇主要想讨论 ConcurrentHashMap 这样一个并发容器，在正式开始之前我觉得有必要谈谈 HashMap，没有它就不会有后面的 ConcurrentHashMap。</p>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:7.6s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-07-02</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/maven-fa-bu-zi-ji-de-maven-gou-jian-dao-zhong-yang-cang-ku">maven-发布自己的maven构件到中央仓库</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><p>发布自己的jar包到中央仓库的好处：</p>
<ol>
<li>省去自建maven私服</li>
<li>方便自己或者别个在他处引用jar包</li>
</ol>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:7.8999999999999995s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-07-01</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/yuan-ma-yue-du-hashmap-de-shi-xian-yuan-li">源码阅读-HashMap的实现原理</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><blockquote>
<p>原文链接：https://blog.csdn.net/fenglibing/article/details/91565912</p>
</blockquote>
<h3 id="hashmap的类图">HashMap的类图</h3>
<figure data-type="image" tabindex="1"><img src="https://caijh.github.io//post-images/1561974106214.png" alt="" loading="lazy"></figure>
<p>HashMap是Java开发当中使用得非常多的一种数据结构，因为其可以快速的定位到需要查找到数据，其最快的速度可以达到O(1)，最差的时候也可以达到O(n)。本文以Java8中的HashMap做为分析原型，因为不同的JDK版本中的HashMap，可能存在着底层实现上的不一样。</p>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:8.2s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-06-30</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/she-ji-mo-shi-qiao-jie-mo-shi">设计模式-桥接模式</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><h4 id="定义">定义</h4>
<blockquote>
<p>Decouple an abstraction from its implementation so that the two can vary independently.（将抽象和实现解耦，使得两者可以独立地变化。）</p>
</blockquote>
<h3 id="uml">UML</h3>
<figure data-type="image" tabindex="1"><img src="https://caijh.github.io//post-images/1561899948043.png" alt="" loading="lazy"></figure>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:8.5s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-06-30</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/she-ji-mo-shi-xiang-yuan-mo-shi">设计模式-享元模式</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><h4 id="定义">定义</h4>
<blockquote>
<p>Use sharing to support large numbers of fine-grained objects efficiently.（使用共享对象可有效地支持大量的细粒度的对象。）</p>
</blockquote>
<h3 id="uml">UML</h3>
<figure data-type="image" tabindex="1"><img src="https://caijh.github.io//post-images/1561899783648.png" alt="" loading="lazy"></figure>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:8.8s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-06-30</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/she-ji-mo-shi-jie-shi-qi-mo-shi">设计模式-解释器模式</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><h4 id="定义">定义</h4>
<blockquote>
<p>Given a language, define a representation for its grammar along with an interpreter that uses the representation to interpret sentences in the language.（给定一门语言，定义它的文法的一种表示，并定义一个解释器，该解释器使用该表示来解释语言中的句子。）</p>
</blockquote>
<h4 id="uml">UML</h4>
<figure data-type="image" tabindex="1"><img src="https://caijh.github.io//post-images/1561899675724.png" alt="" loading="lazy"></figure>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:9.1s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-06-30</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/she-ji-mo-shi-zhuang-tai-mo-shi">设计模式-状态模式</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><h4 id="定义">定义</h4>
<blockquote>
<p>Allow an object to alter its behavior when its internal state changes.The object will appear to change its class.（当一个对象内在状态改变时允许其改变行为，这个对象看起来像改变了其类。）</p>
</blockquote>
<h4 id="uml">UML</h4>
<figure data-type="image" tabindex="1"><img src="https://caijh.github.io//post-images/1561893392766.png" alt="" loading="lazy"></figure>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:9.4s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-06-30</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/she-ji-mo-shi-fang-wen-zhe-mo-shi">设计模式-访问者模式</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><h4 id="定义">定义</h4>
<blockquote>
<p>Represent an operation to be performed on the elements of an object structure. Visitor lets you define a new operation without changing the classes of the elements on which it operates. （封装一些作用于某种数据结构中的各元素的操作，它可以在不改变数据结构的前提下定义作用于这些元素的新的操作。）</p>
</blockquote>
<h4 id="uml">UML</h4>
<figure data-type="image" tabindex="1"><img src="https://caijh.github.io//post-images/1561892912804.png" alt="" loading="lazy"></figure>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:9.7s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-06-30</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/she-ji-mo-shi-bei-wang-lu-mo-shi">设计模式-备忘录模式</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><h4 id="定义">定义</h4>
<blockquote>
<p>Without violating encapsulation,capture and externalize an object's internal state so that the object can be restored to this state later.（在不破坏封装性的前提下，捕获一个对象的内部状态，并在该对象之外保存这个状态。这样以后就可将该对象恢复到原先保存的状态。）</p>
</blockquote>
<h4 id="uml">UML</h4>
<figure data-type="image" tabindex="1"><img src="https://caijh.github.io//post-images/1561891474684.png" alt="" loading="lazy"></figure>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:10s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-06-30</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/she-ji-mo-shi-men-mian-mo-shi">设计模式-门面模式</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><h4 id="定义">定义</h4>
<blockquote>
<p>Provide a unified interface to a set of interfaces in a subsystem.Facade defines a higher-level interface that makes the subsystem easier to use.（要求一个子系统的外部与其内部的通信必须通过一个统一的对象进行。门面模式提供一个高层次的接口，使得子系统更易于使用。）</p>
</blockquote>
<h4 id="uml图">UML图</h4>
<figure data-type="image" tabindex="1"><img src="https://caijh.github.io//post-images/1561890905550.png" alt="" loading="lazy"></figure>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:10.299999999999999s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-06-30</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/she-ji-mo-shi-guan-cha-zhe-mo-shi">设计模式-观察者模式</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><h4 id="定义">定义</h4>
<blockquote>
<p>Define a one-to-many dependency between objects so that when one object changes state,all its dependents are notified and updated automatically.（定义对象间一种一对多的依赖关系，使得每当一个对象改变状态，则所有依赖于它的对象都会得到通知并被自动更新。）</p>
</blockquote>
<h3 id="uml">UML</h3>
<figure data-type="image" tabindex="1"><img src="https://caijh.github.io//post-images/1561890676877.png" alt="" loading="lazy"></figure>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:10.6s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-06-30</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/she-ji-mo-shi-zu-he-mo-shi">设计模式-组合模式</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"></div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:10.9s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-06-30</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/she-ji-mo-shi-die-dai-qi-mo-shi">设计模式-迭代器模式</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><h4 id="定义">定义</h4>
<blockquote>
<p>Provide a way to access the elements of an aggregate object sequentially without exposing its underlying representation.（它提供一种方法访问一个容器对象中各个元素，而又不需暴露该对象的内部细节。）</p>
</blockquote>
<h4 id="uml">UML</h4>
<figure data-type="image" tabindex="1"><img src="https://caijh.github.io//post-images/1561879827619.png" alt="" loading="lazy"></figure>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:11.2s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-06-30</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/she-ji-mo-shi-gua-pei-qi-mo-shi">设计模式-适配器模式</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><h4 id="定义">定义</h4>
<blockquote>
<p>Convert the interface of a class into another interface clients expect.Adapter lets classes work together that couldn't otherwise because of incompatible interfaces.（将一个类的接口变换成客户端所期待的另一种接口，从而使原本因接口不匹配而无法在一起工作的两个类能够在一起工作。）</p>
</blockquote>
<h4 id="uml图">UML图</h4>
<figure data-type="image" tabindex="1"><img src="https://caijh.github.io//post-images/1561879601059.png" alt="" loading="lazy"></figure>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:11.5s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-06-30</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/she-ji-mo-shi-ce-lue-mo-shi">设计模式-策略模式</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><h4 id="定义">定义</h4>
<blockquote>
<p>Define a family of algorithms,encapsulate each one,and make them interchangeable.（定义一组算法，将每个算法都封装起来，并且使它们之间可以互换。）</p>
</blockquote>
<h4 id="uml">UML</h4>
<figure data-type="image" tabindex="1"><img src="https://caijh.github.io//post-images/1561877754788.png" alt="" loading="lazy"></figure>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:11.799999999999999s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-06-30</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/she-ji-mo-shi-zhuang-shi-mo-shi">设计模式-装饰模式</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><h4 id="定义">定义</h4>
<blockquote>
<p>Attach additional responsibilities to an object dynamically keeping the same interface.Decorators provide a flexible alternative to subclassing for extending functionality.（动态地给一个对象添加一些额外的职责。就增加功能来说，装饰模式相比生成子类更为灵活。）</p>
</blockquote>
<h4 id="uml">UML</h4>
<figure data-type="image" tabindex="1"><img src="https://caijh.github.io//post-images/1561877503426.png" alt="" loading="lazy"></figure>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:12.1s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-06-30</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/she-ji-mo-shi-ze-ren-lian-mo-shi">设计模式-责任链模式</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><h4 id="定义">定义</h4>
<blockquote>
<p>Avoid coupling the sender of a request to its receiver by giving more than one object a chance to handle the request.Chain the receiving objects and pass the request along the chain until an object handles it.（使多个对象都有机会处理请求，从而避免了请求的发送者和接受者之间的耦合关系。将这些对象连成一条链，并沿着这条链传递该请求，直到有对象处理它为止。）</p>
</blockquote>
<h4 id="uml">UML</h4>
<figure data-type="image" tabindex="1"><img src="https://caijh.github.io//post-images/1561876377460.png" alt="" loading="lazy"></figure>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:12.4s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-06-30</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/she-ji-mo-shi-ming-ling-mo-shi">设计模式-命令模式</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><h4 id="定义">定义</h4>
<blockquote>
<p>命令模式是一个高内聚的模式，其定义为：Encapsulate a request as an object,thereby letting you parameterize clients with different requests,queue or log requests,and support undoable operations.（将一个请求封装成一个对象，从而让你使用不同的请求把客户端参数化，对请求排队或者记录请求日志，可以提供命令的撤销和恢复功能。）</p>
</blockquote>
<h4 id="uml">UML</h4>
<figure data-type="image" tabindex="1"><img src="https://caijh.github.io//post-images/1561875177967.png" alt="" loading="lazy"></figure>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:12.7s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-06-24</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/she-ji-mo-shi-zhong-jie-zhe-mo-shi">设计模式-中介者模式</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><h4 id="定义">定义</h4>
<blockquote>
<p>中介者模式的定义为：Define an object that encapsulates how a set of objects interact.Mediator promotes loose coupling by keeping objects from referring to each other explicitly,and it lets you vary their interaction independently.（用一个中介对象封装一系列的对象交互，中介者使各对象不需要显示地相互作用，从而使其耦合松散，而且可以独立地改变它们之间的交互。）</p>
</blockquote>
<h4 id="uml">UML</h4>
<figure data-type="image" tabindex="1"><img src="https://caijh.github.io//post-images/1561389056024.png" alt="" loading="lazy"></figure>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:13s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-06-24</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/she-ji-mo-shi-yuan-xing-mo-shi">设计模式-原型模式</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><h4 id="定义">定义</h4>
<blockquote>
<p>Specify the kinds of objects to create using a prototypical instance,and create new objects by copying this prototype.（用原型实例指定创建对象的种类，并且通过拷贝这些原型创建新的对象。）</p>
</blockquote>
<h4 id="uml">UML</h4>
<figure data-type="image" tabindex="1"><img src="https://caijh.github.io//post-images/1561388832916.png" alt="" loading="lazy"></figure>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:13.299999999999999s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-06-24</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/she-ji-mo-shi-dai-li-mo-shi">设计模式-代理模式</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><h4 id="定义">定义</h4>
<blockquote>
<p>Provide a surrogate or placeholder for another object to control access to it.（为其他对象提供一种代理以控制对这个对象的访问。）</p>
</blockquote>
<h4 id="uml">UML</h4>
<figure data-type="image" tabindex="1"><img src="https://caijh.github.io//post-images/1561388635995.png" alt="" loading="lazy"></figure>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:13.6s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-06-24</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/she-ji-mo-shi-jian-zao-zhe-mo-shi">设计模式-建造者模式</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><h4 id="定义">定义</h4>
<blockquote>
<p>Separate the construction of a complex object from its representation so that the same construction process can create different representations.（将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。）</p>
</blockquote>
<h4 id="uml">UML</h4>
<figure data-type="image" tabindex="1"><img src="https://caijh.github.io//post-images/1561388283844.png" alt="" loading="lazy"></figure>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:13.9s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-06-24</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/she-ji-mo-shi-mo-ban-fang-fa-mo-shi">设计模式-模板方法模式</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><h4 id="定义">定义</h4>
<blockquote>
<p>Define the skeleton of an algorithm in an operation,deferring some steps to subclasses.Template Method lets subclasses redefine certain steps of an algorithm without changing the algorithm's structure.（定义一个操作中的算法的框架，而将一些步骤延迟到子类中。使得子类可以不改变一个算法的结构即可重定义该算法的某些特定步骤。）</p>
</blockquote>
<h4 id="uml">UML</h4>
<figure data-type="image" tabindex="1"><img src="https://caijh.github.io//post-images/1561387763499.png" alt="" loading="lazy"></figure>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:14.2s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-06-24</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/she-ji-mo-shi-chou-xiang-gong-han-mo-shi">设计模式-抽象工厂模式</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><h4 id="定义">定义</h4>
<blockquote>
<p>Provide an interface for creating families of related or dependent objects without specifying their concrete classes.（为创建一组相关或相互依赖的对象提供一个接口，而且无须指定它们的具体类。）</p>
</blockquote>
<h4 id="uml类图">UML类图</h4>
<figure data-type="image" tabindex="1"><img src="https://caijh.github.io//post-images/1561387400624.png" alt="" loading="lazy"></figure>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:14.5s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-06-24</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/she-ji-mo-shi-gong-han-fang-fa-mo-shi">设计模式-工厂方法模式</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><h4 id="定义">定义</h4>
<blockquote>
<p>Define an interface for creating an object,but let subclasses decide which class to instantiate.Factory Method lets a class defer instantiation to subclasses.（定义一个用于创建对象的接口，让子类决定实例化哪一个类。工厂方法使一个类的实例化延迟到其子类。）</p>
</blockquote>
<h4 id="uml">UML</h4>
<figure data-type="image" tabindex="1"><img src="https://design-patterns.readthedocs.io/zh_CN/latest/_images/FactoryMethod.jpg" alt="IMAGE" loading="lazy"></figure>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:14.799999999999999s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-06-24</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/she-ji-mo-shi-dan-li-mo-shi">设计模式-单例模式</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><blockquote>
<p>Ensure a class has only one instance, and provide a global point of access to it.（确保某一个类只有一个实例，而且自行实例化并向整个系统提供这个实例。）</p>
</blockquote>
<h5 id="类图">类图</h5>
<figure data-type="image" tabindex="1"><img src="https://caijh.github.io//post-images/1561372464381.png" alt="" loading="lazy"></figure>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:15.1s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-06-24</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/she-ji-mo-shi-solid-yuan-ze">设计模式-SOLID原则</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><p>运用设计模式，需要记住六大设计原则：</p>
<ul>
<li>Single Responsibility Principle：单一职责原则</li>
<li>Open Closed Principle：开闭原则</li>
<li>Liskov Substitution Principle：里氏替换原则</li>
<li>Law of Demeter：迪米特法则</li>
<li>Interface Segregation Principle：接口隔离原则</li>
<li>Dependence Inversion Principle：依赖倒置原则</li>
<li>少用继承，多用组合</li>
</ul>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:15.399999999999999s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-06-24</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/mysql-gui-fan">MySQL规范</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><h1 id="数据库命名规范">数据库命名规范</h1>
<ul>
<li>所有数据库对象名称必须使用小写字母并用下划线分割</li>
<li>所有数据库对象名称禁止使用mysql保留关键字（如果表名中包含关键字查询时，需要将其用单引号括起来）</li>
<li>数据库对象的命名要能做到见名识意，并且最后不要超过32个字符</li>
<li>临时库表必须以tmp_为前缀并以日期为后缀，备份表必须以bak_为前缀并以日期(时间戳)为后缀</li>
<li>所有存储相同数据的列名和列类型必须一致（一般作为关联列，如果查询时关联列类型不一致会自动进行数据类型隐式转换，会造成列上的索引失效，导致查询效率降低）</li>
</ul>
</div>
                                          </div>
                                </article>
                                
                                
                               
                                <article class="animated fadeIn" style="animation-delay:15.7s;animation-duration: 2s">
                                        <div class="mdui-col mdui-p-a-1">
                                          <div class="archives mdui-p-a-3">
                                            <div class="mdui-typo-body-2 mdui-m-b-1">2019-06-24</div>
                                            <div class="mdui-m-b-2 archives-title"><a href="https://caijh.github.io/post/graphql-xue-xi-bi-ji">GraphQL学习笔记</a></div>
                                            <div class="mdui-typo-subheading mdui-m-b-1 mdui-text-truncate"><h2 id="graphql是什么">GraphQL是什么？</h2>
<p>GraphQl官方的定义是：</p>
<p>GraphQL是一种API的查询语言。 它用于运行时完成数据查询。 GraphQL服务与传输无关，但通常通过HTTP提供。</p>
<p>GraphQl特性</p>
<ul>
<li>GraphQL query， 只请求需要的数据</li>
<li>GraphQL schema， 在服务器端定义了api的数据结构</li>
<li>可以在一个请求中获取多个数据，如果是rest的话， 需要访问多个接口</li>
</ul>
<p>与REST对比，REST的缺点的主要有以下:</p>
<ul>
<li>Overfetching 往往会给客户端返回过多的数据</li>
<li>endpoints过多，管理endpoints是个问题。Endpoints修改，客户端也需要修改。</li>
</ul>
</div>
                                          </div>
                                </article>
                                
                                
                                
                              </div>
                                                            <nav class="mdui-m-t-5">
                                
                                
                                </nav>     
                                    
                        </div>
                      </div>
    
                

              </div>
                     <footer class="footer mdui-m-t-5 mdui-text-center">
               <nav class="social-links">
                      <ul>
                      
                      
                           
                      
                           
                      
                           
                      
                           
                      
                           
                      
                           
                      
                           
                      
                           
                      
                           
                      
                           
                      
                           
                      
                           
                      </ul>
                    </nav>
                    <div class="copyright">
                      <p>Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> <br/> Theme <a href="https://github.com/shanbufun/gridea-theme-song" target="_blank"  title="宋"  >Song</a> by <a href="https://shanbu.fun/" target="_blank"  title="山卜方" >shanbufun</a> </p>
                  </div>
                  
              </footer>
    </body>
</html>