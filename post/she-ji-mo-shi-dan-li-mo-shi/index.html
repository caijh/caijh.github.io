<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>设计模式-单例模式 | John&#39;s Blog</title>
<meta name="description" content="搬砖大佬">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="shortcut icon" href="https://caijh.github.io//favicon.ico?v=1561892685096">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" href="https://unpkg.com/papercss@1.6.1/dist/paper.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://caijh.github.io//styles/main.css">


  

  
    <link rel="stylesheet" href="https://unpkg.com/disqusjs@1.1/dist/disqusjs.css" />
  

<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>


<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />


  </head>
  <body>
  
    <nav class="navbar border fixed split-nav">
  <div class="nav-brand">
    <h3><a href="https://caijh.github.io/">John&#39;s Blog</a></h3>
  </div>
  <div class="collapsible">
    <input id="collapsible1" type="checkbox" name="collapsible1">
    <button>
      <label for="collapsible1">
        <div class="bar1"></div>
        <div class="bar2"></div>
        <div class="bar3"></div>
      </label>
    </button>
    <div class="collapsible-body">
      <ul class="inline">
        
          <li>
            
              <a href="/" class="menu">
                首页
              </a>
            
          </li>
        
          <li>
            
              <a href="/archives" class="menu">
                归档
              </a>
            
          </li>
        
          <li>
            
              <a href="/tags" class="menu">
                标签
              </a>
            
          </li>
        
          <li>
            
              <a href="/post/about" class="menu">
                关于
              </a>
            
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div id="top" class="row site">
      <div class="sm-12 md-8 col">
        <div class="paper">
          <article class="article">
            <h1>设计模式-单例模式</h1>
            <p class="article-meta">
              2019-06-24
              
                <a href="https://caijh.github.io//tag/CymMFfR-7" class="badge success">
                  设计模式
                </a>
              
            </p>
            
              <img src="data:image/jpeg;base64,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" alt="设计模式-单例模式">
            
            <div class="post-content">
              <blockquote>
<p>Ensure a class has only one instance, and provide a global point of access to it.（确保某一个类只有一个实例，而且自行实例化并向整个系统提供这个实例。）</p>
</blockquote>
<h5 id="类图">类图</h5>
<p><img src="https://caijh.github.io//post-images/1561372464381.png" alt=""></p>
<!-- more -->
<h6 id="饿汉模式">饿汉模式</h6>
<pre><code>public class Singleton {

    private static final Singleton SINGLETON = new Singleton();

    private Singleton() {

    }

    public static Singleton getInstance() {
        return SINGLETON;
    }
}
</code></pre>
<h6 id="懒汉模式">懒汉模式</h6>
<pre><code>public class SingletonLay {
    private static SingletonLay singletonLay = null;

    private SingletonLay() {

    }

    public static SingletonLay getSingletonLay() {
        if (singletonLay == null) {
            synchronized (SingletonLay.class) {
                if (singletonLay == null) {
                    singletonLay = new SingletonLay();
                }
            }
        }
        return singletonLay;
    }
}
</code></pre>
<p><strong>隐患</strong>
上述写法看似解决了问题，但是有个很大的隐患。实例化对象的那行代码（标记为error的那行），实际上可以分解成以下三个步骤：</p>
<ol>
<li>
<p>分配内存空间</p>
</li>
<li>
<p>初始化对象</p>
</li>
<li>
<p>将对象指向刚分配的内存空间
但是有些编译器为了性能的原因，可能会将第二步和第三步进行重排序，顺序就成了：</p>
</li>
<li>
<p>分配内存空间</p>
</li>
<li>
<p>将对象指向刚分配的内存空间</p>
</li>
<li>
<p>初始化对象</p>
</li>
</ol>
<p>正确的双重检查锁</p>
<pre><code>public class SingletonLay {
    private static volilate SingletonLay singletonLay = null;

    private SingletonLay() {

    }

    public static SingletonLay getSingletonLay() {
        if (singletonLay == null) {
            synchronized (SingletonLay.class) {
                if (singletonLay == null) {
                    singletonLay = new SingletonLay();
                }
            }
        }
        return singletonLay;
    }
}
</code></pre>
<h6 id="enum-方式">Enum 方式</h6>
<pre><code>class Resource{
}

public enum Singleton {
    INSTANCE;
    private Resource instance;
    Singleton() {
        instance = new Resource();
    }
    public Resource getInstance() {
        return instance;
    }
}
</code></pre>

            </div>
          </article>
        </div>
        <div class="paper" data-aos="fade-in">
          
            <div class="next-post">
              <div class="next">
                下一篇
              </div>
              <a href="https://caijh.github.io//post/she-ji-mo-shi-solid-yuan-ze">
                <h3 class="post-title">
                  设计模式-SOLID原则
                </h3>
              </a>
            </div>
          
        </div>
        
          

          
            <div class="paper" data-aos="fade-in">
              <div id="disqus_thread"></div>
            </div>
          
        
      </div>

      <div class="sm-12 md-4 col sidebar">
  <div class="paper info-container">
    <img src="https://caijh.github.io//images/avatar.png?v=1561892685096" class="no-responsive avatar">
    <div class="text-muted">搬砖大佬</div>
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
  </div>
  <div class="paper">
    <div class="sidebar-title">
      最新文章
    </div>
    <div class="row">
      <ul>
        
          
            <li>
              <a href="https://caijh.github.io//post/she-ji-mo-shi-bei-wang-lu-mo-shi">设计模式-备忘录模式</a>
            </li>
          
        
          
            <li>
              <a href="https://caijh.github.io//post/she-ji-mo-shi-men-mian-mo-shi">设计模式-门面模式</a>
            </li>
          
        
          
            <li>
              <a href="https://caijh.github.io//post/she-ji-mo-shi-guan-cha-zhe-mo-shi">设计模式-观察者模式</a>
            </li>
          
        
          
            <li>
              <a href="https://caijh.github.io//post/she-ji-mo-shi-zu-he-mo-shi">设计模式-组合模式</a>
            </li>
          
        
          
            <li>
              <a href="https://caijh.github.io//post/she-ji-mo-shi-die-dai-qi-mo-shi">设计模式-迭代器模式</a>
            </li>
          
        
          
            <li>
              <a href="https://caijh.github.io//post/she-ji-mo-shi-gua-pei-qi-mo-shi">设计模式-适配器模式</a>
            </li>
          
        
          
            <li>
              <a href="https://caijh.github.io//post/she-ji-mo-shi-ce-lue-mo-shi">设计模式-策略模式</a>
            </li>
          
        
          
            <li>
              <a href="https://caijh.github.io//post/she-ji-mo-shi-zhuang-shi-mo-shi">设计模式-装饰模式</a>
            </li>
          
        
          
            <li>
              <a href="https://caijh.github.io//post/she-ji-mo-shi-ze-ren-lian-mo-shi">设计模式-责任链模式</a>
            </li>
          
        
          
            <li>
              <a href="https://caijh.github.io//post/she-ji-mo-shi-ming-ling-mo-shi">设计模式-命令模式</a>
            </li>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </ul>
    </div>
  </div>
  <div class="paper">
    <div class="sidebar-title">
      标签列表
    </div>
    <div class="row">
      
        <a href="https://caijh.github.io//tag/CymMFfR-7" class="badge secondary">
          设计模式
        </a>
      
        <a href="https://caijh.github.io//tag/o82yUqML0" class="badge secondary">
          MySQL
        </a>
      
        <a href="https://caijh.github.io//tag/nFkZ3G6Fh" class="badge success">
          Java
        </a>
      
    </div>
  </div>
  <div class="paper">
    Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://caijh.github.io//atom.xml" target="_blank">RSS</a>
  </div>
</div>


    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<script type="application/javascript">

AOS.init();

hljs.initHighlightingOnLoad()

</script>



  

  
    <script src="https://unpkg.com/disqusjs@1.1/dist/disqus.js"></script>
    <script>

    var options = {
      shortname: 'caijh',
      apikey: 'lO2xchFAyPIP4VOKbgm796D9jIvqLVziAqLHOPnOZySwUlyWXAhgwrIbPQ16AyUX',
    }
    if ('https://disqus.skk.moe/disqus/') {
      options.api = 'https://disqus.skk.moe/disqus/'
    }
    var dsqjs = new DisqusJS(options)

    </script>
  




  </body>
</html>
